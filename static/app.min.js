class IconLibrary{constructor(){this.iconData=null,this.currentPack=null,this.currentView="main",this.searchQuery="",this.searchFilter="all",this.numFormatter=new Intl.NumberFormat(navigator.language||"en-US"),this.init()}byId(t){return document.getElementById(t)}setView(t){["packs","icons","results","error","loading"].forEach((a=>{const n=this.byId(a);n&&(a===t?n.style.removeProperty("display"):n.style.display="none")}))}formatNumber(t){return"number"==typeof t?this.numFormatter.format(t):t}async init(){this.setupEventListeners(),await this.loadIconData()}setupEventListeners(){this.byId("search-input")?.addEventListener("input",(t=>this.handleSearch(t.target.value))),this.byId("icon-search-input")?.addEventListener("input",(t=>this.filterIcons(t.target.value))),this.byId("back-btn")?.addEventListener("click",(()=>this.showMainView())),this.byId("download-pack-btn")?.addEventListener("click",(()=>this.downloadPack())),document.querySelectorAll(".filter-btn").forEach((t=>t.addEventListener("click",(t=>this.setSearchFilter(t.target.dataset.filter))))),document.addEventListener("keydown",(t=>{"Escape"===t.key&&"main"!==this.currentView&&this.showMainView(),(t.ctrlKey||t.metaKey)&&"k"===t.key&&(t.preventDefault(),this.byId("search-input").focus())})),document.body.addEventListener("click",(t=>{const a=t.target.closest("button[data-action]");if(!a)return;const{action:n,pack:i,filename:e,packpath:s}=a.dataset;({"show-pack":()=>this.showPackView(i),"download-pack":()=>this.downloadPack(i),"download-icon":()=>this.downloadIcon(e,s),"copy-svg":()=>this.copySvgCode(e,s)})[n]?.()}))}async loadIconData(){try{const t=await fetch("icons-data.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.iconData=await t.json(),this.showMainView()}catch(t){this.setView("error")}}showMainView(){this.currentView="main",this.currentPack=null,this.setView("packs");this.byId("search-input").value="",this.searchQuery="",this.iconData&&(this.byId("pack-count").textContent=`${this.formatNumber(this.iconData.totalPacks)} packs`,this.byId("icon-count").textContent=`${this.formatNumber(this.iconData.totalIcons)} icons`,this.byId("total-size").textContent=this.iconData.formattedTotalSize,this.byId("packs-grid").innerHTML=this.iconData?.packs.length?this.iconData.packs.map((t=>this.packCardHtml(t))).join(""):"<p>No icon packs found.</p>")}showPackView(t){const a=this.iconData.packs.find((a=>a.name===t));a&&(this.currentPack=a,this.currentView="pack",this.setView("icons"),this.byId("pack-name").textContent=a.name,this.byId("pack-icon-count").textContent=`${this.formatNumber(a.iconCount)} icons`,this.byId("pack-size").textContent=a.formattedSize,this.byId("icon-search-input").value="",this.byId("icons-grid").innerHTML=a.icons?.length?a.icons.map((t=>this.iconCardHtml(t,this.currentPack.path))).join(""):"<p>No icons found.</p>")}packCardHtml(t){return`<div class="pack-card"><div class="pack-header"><h3 class="pack-title">${t.name}</h3><div class="pack-meta"><span>${this.formatNumber(t.iconCount)} icons</span><span>â€¢</span><span>${t.formattedSize}</span></div></div><div class="pack-actions"><button data-action="show-pack" data-pack="${t.name}">View Icons</button><button data-action="download-pack" data-pack="${t.name}">Download Pack</button></div></div>`}iconCardHtml(t,a,n){const i=a||this.currentPack?.path||"";return`<div class="icon-card"><div class="icon-preview"><img src="icons/${i}/${t.filename}" alt="${t.description}" loading="lazy" /></div><div class="icon-name">${t.description}</div><div class="icon-actions"><button data-action="download-icon" data-filename="${t.filename}" data-packpath="${i}">Download</button><button data-action="copy-svg" data-filename="${t.filename}" data-packpath="${i}">Copy SVG</button>`+(n?`<button class="pack-name" data-action="show-pack" data-pack="${n}">${n}</button>`:"")+"</div></div>"}}document.addEventListener("DOMContentLoaded",(()=>{window.app=new IconLibrary}));